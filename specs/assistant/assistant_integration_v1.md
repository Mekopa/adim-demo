# Assistant Frontend Integration Specification

## Overview

This document outlines the specifications for integrating the Assistant service into the frontend application. The integration will enable users to interact with the Assistant through a chat interface, managing chat sessions and handling responses effectively.

## API Endpoint

- **URL**: `/assistant/chat/`
- **Method**: POST
- **Authentication**: Bearer Token

## Request Format

The request to the Assistant API should be a JSON object with the following fields:

- `user_message` (string): The message from the user.
- `output_type` (string, optional): The format of the response, default is "chat".
- `input_type` (string, optional): The format of the input, default is "chat".
- `tweaks` (object, optional): Additional parameters for customizing the response.
- `session_id` (string, optional): The unique identifier for an existing chat session. If not provided, a new session will be created.

Example:
```json
{
  "user_message": "Hello, how can I help you?",
  "output_type": "chat",
  "input_type": "chat",
  "tweaks": {},
  "session_id": "123e4567-e89b-12d3-a456-426614174000"
}
```

## Response Format

The response from the Assistant API will be a JSON object with the following fields:

- `session_id` (string): The unique identifier for the chat session.
- `response_message` (string): The message generated by the Assistant.
- `sender` (string): The sender of the message, typically "AI".

Example:
```json
{
  "session_id": "123e4567-e89b-12d3-a456-426614174000",
  "response_message": "I'm here to assist you with your queries.",
  "sender": "AI"
}
```

## Session Management

- **Creating a New Session**: If `session_id` is not provided in the request, the backend will generate a new unique `session_id` and associate it with the chat session.
- **Using an Existing Session**: If `session_id` is provided, the backend will retrieve and update the corresponding chat session.
- **Session Persistence**: All chat sessions are stored in the database with timestamps to manage session history and timeouts if necessary.

## Error Handling

- **503 Service Unavailable**: Indicates that the service is temporarily unavailable. The frontend should implement retry logic or display an appropriate message to the user.
- **400 Bad Request**: Returned when mandatory fields are missing or `session_id` is invalid. The frontend should prompt the user to restart the chat or provide correct information.

## Frontend Implementation

- The frontend should provide a chat interface where users can type messages and receive responses.
- **Session Handling**:
  - **New Chats**: Generate a new `session_id` when initiating a chat.
  - **Existing Chats**: Utilize the existing `session_id` to continue conversations.
- Ensure that the user interface is responsive and accessible.
- Implement loading indicators while waiting for the API response.
- Handle errors gracefully and provide feedback to the user.
- Store `session_id` locally (e.g., in browser storage) to maintain chat continuity.

## Testing

- Test the integration with various user inputs to ensure robustness.
- Validate the API responses and handle any discrepancies.
- Test session creation and management to ensure continuity and isolation between different chat sessions.
```
